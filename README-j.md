# Puts_CC
中程度のテキストを初等的な辞書を使って目次と元記事へのリンクを作成することを目的としています。
また、このプログラムは決定論的な手法で書かれています。機械学習を使用していません。

また、このプログラムは入力された情報に対して何ら真偽を判定するものではなく、入力された情報から、
それが真と主張されているか、または偽と主張されているか、の該当部分を表記から抜き出すものです。

このプログラムはとても大きなメモリ領域を必要とします。また、大きなメモリをなめる操作を何回か行うことと、ほとんどのメモリキャッシュ実装がこのプログラムに対して無効なのでとても遅いです。

# 使い方
    make tools
    ./tools lword < data.txt
    ./tools lword prepared_word_list.txt < data.txt
    ./tools lbalance wordlist.txt < data.txt
    ./tools toc wordlist.txt dictionaries ... -toc topics ... < data.txt
    ./tools lack wordlist.txt dictionaries ... -toc topics ... < data.txt
    ./tools redig wordlist.txt < data.txt
    ./tools stat wordlist.txt dictionaries ... < data.txt
    ./tools findroot wordlist.txt dictionaries ... < data.txt
    ./tools diff wordlist.txt -dict ... -dict2 ... < data.txt
    ./tools same wordlist.txt -dict ... -dict2 ... < data.txt
    ./tools prep wordlist.txt < data.txt

# メモリフラグメント
jemalloc などのより効率の良いアロケータを使うとヒープメモリ使用量を大幅に削減することができます。

# 文脈
形態要素解析のソフトウェア、及び自動パラメタ調整のソフトウェアに刺激されました。  
また、テンソルによるテキストの表現については、先行がありましたが、これとは若干コンセプトが異なりました。(R.B. ieee 2004)

# 状態
Freeze 前の細かな実装のチェックをしています。
abbrev 関数はまだ若干不安定です。

# ライブラリとしての使い方
tools.cc を参照してください。また、namespace ブロックで括ってください。ただし、インクルードガードの定義が高確率で有害です。

# web インターフェースの使い方
php ファイルと prep.py ファイルおよび tools 実行ファイルを(puts 実行ファイルとして)ディレクトリにおいてください。
また、パーミッションを適宜指定した data ディレクトリを作成してください。  
mysql 互換のデータベース環境および php 実行環境と、python 実行環境が必要です。
また、諸処のコマンドのパスが設定されている必要があります。

prep.py はとても古い python2.7 および \_mysql ライブラリを必要とします。
また、データベースの参照は prep.py のみ行っています。適宜接続設定を書き換えてお使いください。

# wiktionary のインポート (GFDL)
mediawiki さんの最新バージョンと xml2sql さんが必要です。
必要であれば莫大なデータベースである wikipedia さんの wiktionary をインポートしてください。
また、wiktionary 辞書引きはとても大きなメモリ領域を必要とします。

# Tips
これらのプログラムはまだよく検証されたアルゴリズムを使用して*いない可能性があります*。  
内部処理で使用されるテンソルが Dense な場合、示される情報は意味を失っています。複数レイヤに別れた辞書をうまく使うと、このような状態を避けることができます。  
このプログラムを形態要素解析と一緒に使うときちんとした結果が得られますが、現状そうして*いません*。このプログラムは単語同士の距離と順序のみを問題としています、これは何が着目されているかに大まかにつながるものです。  
このプログラムは何が言われたかについて着目するものであり、何が言われていないか、について着目するものではありません。  
abbrev 関数は、理想的には withDetail 関数の逆の最適化となっていることが望ましいですが、現状そうなっていません。  
serialize 関数は、理想的には corpushl(corpus(...)) イニシャライザの逆の最適化となっていることが望ましいですが、現状そうなっていません。  
純粋な興味で作られたプログラムですので、文脈を理解する際の補助として以外には使用しないでください。  
もし大きなよく記述されたテキストと辞書があれば、自分の主張と反対の主張を演繹することができますが、これは何が文脈から言えるかであり、何が実際の問題かということではありません。  
きちんとした辞書を用いない場合には、このプログラムは順序をきちんと処理できない事があります。これは、文同士の順序を辞書のみを考慮して計測していることによります。  

# その他のダウンロードサイト
* https://ja.osdn.net/projects/puts-cc/
* https://www.sourceforge.net/projects/puts-cc/
* https://sites.google.com/view/bitsofcotton/

# 頓挫されたもの
これらのプログラムと形態素解析および論理演算をカテゴリ - 関係性 - 尺度の領域ペアでテンソルを記述すると現在よりも正しい結果が得られると推測され、また、末端の論理演算により有用な使用ができる可能性がありますが、実装されていません。これらは話題を整理して目次を作成するだけのものには不要です。また、それを使用した場合には、2 つ以上の事象に対してまたは 2 人以上の人からの記述の場合には示されるテーブルは意味のないものになります。また、そのような事象をこのプログラムはきちんと処理できません。  
また、新規の事象を記述する際には着目する対象の持つ質感と関連性が必要です。さらに、物語を新規に作成しようとする際には、複数の示される(対象と複数の主観の)テーブルの推移や、世界内での関連性の記述が必須です。そのような目的にこのプログラムを応用しようとする場合には、辞書引きの他に糊代となるエンティティの空間が必要です。  
また、ゲームのモブキャラクタの台詞の自動生成の際にはそのモブキャラクタが事象などの何に着目しやすいかが必要です。これは辞書に押し付けることができますが、内部状態が何も変わらない場合には会話は困難です。

# 検討されている途中のもの
論理否定をきちんと処理できると、主張の大まかな(現状よりより細かな)類別ができます。検討中です。not a を新しい単語と置いて出来るか検討中です。
また、辞書との有為な情報のデルタを取れるか検討中です。

